https://pdst.narod.ru/_20_el_uch/ost_wpd_01/part00.html
http://www.habarov.spb.ru/
https://math.gsu.by/wp-content/uploads/courses/networks/r3.3.html

Итак, записи таблицы мартрутов точно определяют:
    - Место назначения (сетевой адрес/маска сети).
    - Какой маршрутизатор (шлюз) использовать для посылки пакетов к месту назначения.
    - Какой интерфейс использовать для посылки пакетов к месту назначения.
    
    route ADD сетевой_адрес MASK сетевая_маска шлюз
            route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 if 0x3
            route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 metric 7
            route -p add 10.41.0.0 mask 255.255.0.0 10.27.0.1
            route delete 10.41.0.0 mask 255.255.0.0
            route change 10.41.0.0 mask 255.255.0.0 10.27.0.25
            
            
У меня на компьютере 2 интерфейса:
    Сетевая карта с IP-адресом 192.168.0.4.
    Модем с интерфейсом PPP и IP-адресом 203.96.10.51.
    
    Адрес 0.0.0.0 в колонке шлюза (Gateway) обозначает, что адрес назначения доступен без маршрутизации.
    IP-адрес 0.0.0.0 с маской 0.0.0.0 означает любой IP-адрес везде.
        Сетевой адрес 0.0.0.0 и маска сети 0.0.0.0 это обозначение маршрута по умолчанию (default route). Это тот маршрут, куда отправляется трафик, для которого явно не прописан другой маршрут.
    192.168.0.255 - широковещательный адрес для рассылки широковещательных пакетов по нашей сети. 
    203.96.10.255 - широковещательный адрес для рассылки широковещательных пакетов по сегменту сети вашего провайдера.
    224.0.0.0 - другой широковещательный адрес и на вашу сеть, и на сеть провайдера. Результатом действия двух записей с сетевым адресом 224.0.0.0 будет широковещательная рассылка пакетов по вашей сети и сети провайдера.
    255.255.255.255 - глобальный широковещательный адрес.
    Адреса 244.0.0.0 - тоже специальные зафиксированные адреса для широкого вещания
    
    В случае, когда там написано "On-link", имеется в виду, что никаких маршрутизаторов не нужно - адрес и так находится в прямой досягаемости.
    
    Windows
        route print
    Unix
        netstat -rn
    Linux
        route -n
        ip route  или ip r s
        
        
MTU (Maximum Transmission Unit; максимальная единица передачи)
    MTU = MSS + заголовок IP + заголовок ICMP
    Для поиска MSS(Maximum Segment Size) в Windows можно использовать "ping www.yandex.ru -f -l 1450" и увеличивать размер пакета пока не начнётся "Требуется фрагментация пакета." Здесь -f запрет фрагментации.

    MTU текущего подключения в Windows 
        netsh interface ipv4 show subinterfaces

TCP/IP и OSI разрабатывались параллельно и независимо, по этой причине не соответствуют друг другу как 1:1. В TCP/IP нет части уровней, а часть можно соотнести:

Уровни OSI
7.	Прикладной          - HTTP, SMTP итд
6.	Представительский   - Нет в TCP/IP
5.	Сеансовый           - Нет в TCP/IP
4.	Транспортный        - предназначен для доставки данных. При этом неважно, какие данные передаются, откуда и куда, то есть, он предоставляет сам механизм передачи. Блоки данных он разделяет на фрагменты, размеры которых зависят от протокола: короткие объединяет в один, а длинные разбивает. Протоколы этого уровня предназначены для взаимодействия типа точка-точка. Пример: TCP, UDP, SCTP.
3.	Сетевой(L3)             - (IP) предназначается для определения пути передачи данных (маршрутизация). Отвечает за трансляцию логических адресов (IP) и имён в физические(MAC), определение кратчайших маршрутов, маршрутизацию, отслеживание неполадок и заторов в сети. На этом уровне работает такое сетевое устройство, как маршрутизатор. 
        - В пределах семантики иерархического представления модели OSI Сетевой уровень отвечает на запросы обслуживания от Транспортного уровня и направляет запросы обслуживания на Канальный уровень.
        - Сетевой уровень работает без гарантии доставки и установления соединения.

2.	Канальный(L2)           - Здесь появляются термины «фрейм» и «MAC-адрес».
1.	Физический(L1)          - Кабели/сигналы/вльты

- На прикладном уровне находится приложение.
- На транспортном уровне работают UDP и TCP.
- Сетевой уровень представлен сетевым (аппаратным) интерфейсом.
- Аппаратный уровень - это физическая сеть.

Протоколы Internet сетевого уровня обеспечивают соединение между двумя компьютерами в сети.
    Другими словами, этот уровень отвечает за маршрутизацию TCP/IP. Эти протоколы принимают запросы на отправку пакетов (содержащие адрес получателя) от транспортного уровня, преобразуют пакеты в дейтаграммы и отправляют их на уровень сетевого интерфейса для дальнейшей обработки.

    - Протокол преобразования адресов
        Базовый протокол сетевого уровня - это Протокол преобразования адресов (ARP). ARP выполняет динамическое преобразование IP-адресов в уникальные физические адреса хостов локальных сетей.
    - Протокол управляющих сообщений Internet
        Вторым протоколом сетевого уровня является Протокол управляющих сообщений Internet (ICMP). ICMP - обязательная часть любой реализации IP. ICMP отправляет сообщения об ошибках и управляющие сообщения протоколу IP.
    - Протокол Internet (IP)
        Третий протокол сетевого уровня в семействе TCP/IP - Протокол Internet (IP). Он доставляет пакеты по сети Internet без гарантии доставки и без установления соединения.

            Протокол IP взаимодействует с протоколами уровня сетевого интерфейса. Данные передаются по физическим соединениям в виде кадров, содержащих заголовок и данные. В заголовке указываются адреса отправителя и получателя. В IP данные передаются в виде IP-дейтаграмм, формат которых аналогичен формату кадра. У дейтаграммы также есть заголовок, в котором содержатся IP-адреса отправителя и получателя.

Сетевой шлюз конвертирует протоколы одного типа физической среды в протоколы другой физической среды (сети). Например, при соединении локального компьютера с сетью Интернет обычно используется сетевой шлюз.
    - Основная задача сетевого шлюза — конвертировать протокол между сетями.
        - Сетевой шлюз — это точка сети, которая служит выходом в другую сеть.
        - В крупных сетях сервер, работающий как сетевой шлюз, обычно интегрирован с прокси-сервером и межсетевым экраном. Сетевой шлюз часто объединен с роутером, который управляет распределением и конвертацией пакетов в сети.
    - Роутер(маршрутизатор) сам по себе принимает, проводит и отправляет пакеты только среди сетей, использующих одинаковые протоколы.
    - Сетевой шлюз может с одной стороны принять пакет, сформатированный под один протокол (например Apple Talk) и конвертировать в пакет другого протокола (например TCP/IP) перед отправкой в другой сегмент сети.

Маршрутизатор (он же — роутер) является одним из примеров аппаратных сетевых шлюзов.

Совершенно верно, просто шлюз это литературный первод английского слова gateway, gate и т.д.

Маршрутизаторы осуществляют выбор оптимального маршрута для каждого пакета с целью избежания чрезмерной нагрузки отдельных участков сети и обхода поврежденных участков. Они применяются, как правило, в сложных разветвленных сетях, имеющих несколько маршрутов между отдельными абонентами. Маршрутизаторы не преобразуют протоколы нижних уровней, поэтому они соединяют только сегменты одноименных сетей.
Маршрутизаторы работают на третьем уровне модели OSI, так как они анализируют не только MAC-адреса пакета, но и IP-адреса, то есть более глубоко проникают в инкапсулированный пакет. И опять же это может быть комп с несколькими сетевухами или железка с туевой хучей портов.

Мосты (bridge) служат для объединения в одну сеть несколько разнородных сетей с разными протоколами обмена нижнего уровня, в частности, с разными форматами пакетов, методами кодирования, скоростью передачи и т.д. В результате их применения сложная и неоднородная сеть, содержащая в себе различные сегменты, с точки зрения пользователя выглядит самой обычной сетью. Обеспечивается прозрачность сети для протоколов высокого уровня. Все они гораздо дороже, чем концентраторы, так как от них требуется довольно сложная обработка информации. Сейчас практически производство мостов сошло на нет, так как их функции практически есть во всех нормальных маршрутизаторах, и даже комутаторах, т.е. в железке есть как оптические для FDDI так и обычные ethernet порты с возможностью замены на другие. Кстати в основном мост это железная бандурина.
    - Сетевой мост (также бридж с англ. bridge) — сетевое устройство второго (канального) уровня сетевой модели OSI. Предназначен для объединения сегментов (подсетей) компьютерной сети в единую сеть.


Комутатор работает на втором уровне OSI
    В отличии от концентратора, передает непосредственно получателю (исключение является широковещательный трафик, или если получатель еще не известен т.е. порт не определён)

    Комутатор хранит в памяти таблицу порт коммутатора и MAC подключённого ПК

Мост - пересылают сообщение не всем устройствам сети, а только в тот сегмент сети, в котором находится получатель. Мост это устройства, разделяющее сети. Они работают с физическими адресами станций на канальном уровне.
    Мост опрашивает устройства и записывает их адреса к себе в память.

    Работая в сегменте 1 мост получает все кадры этого сегмента. ингорирует кадры. адресованные станциям сегмента 1, а кадры, адресованные станциям сегмента 2, передаёт на соответствующий порт.

А марштуритазот на третьем уровне OSI